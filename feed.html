<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="feed.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
    <title>Donor</title>
</head>
<body>
    <div class="top">
        <img src="images/logo.png" > 
        <button class="topbtn1 btn-danger">SIGN UP</button> 
        <button class="topbtn2 btn-outline-danger">LOGIN</button> 
</div>
<nav class="navbarr navbar navbar-expand-sm">
    <div class="container-fluid-lg">
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#mynav" style="padding:10px">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-list" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"/>
          </svg>
    </button>
    <div class="collapse navbar-collapse" id="mynav">
    <ul class="navbar-nav">
        <li class="nav-item"><a href="" class="nav-link">HOME</a></li>
        <li class="nav-item"><a href="" class="nav-link">BLOOD BANK</a></li>
        <li class="nav-item"><a href="" class="nav-link">BENEFITS</a></li>
        <li class="nav-item"><a href="" class="nav-link">HELP</a></li>
        <li class="nav-item"><a href="" class="nav-link">CONTACT US</a></li>
    </ul>
    </div>
    </div>
</nav>
<form class="size" id="form">
        <h1>Feedback Form</h1>
        <div class="log">
        <div class="fgroup">
        <span>Full Name</span><br>
        <input type="text"  placeholder="Enter Your Name" name="name" id="name" data-name="Name">
        <p></p>
        </div>
        <div class="fgroup">
        <span>Email</span><br>
        <input type="text" placeholder="Valid Email ID" id="mail" name="mail" data-name="Mail ID"> 
        <p></p>
        </div>
        <div class="fgroup">
            <span>FeedBack</span><br>
            <textarea row="10" placeholder="Enter Your Feed About Our Blood Bank" id="feedback" name="feedback" data-name="FeedBack"></textarea>
            <p></p>
        </div>
        </div>
        <div class="check"><input type="checkbox"><span> I Accept <span style="color:red">Terms & Conditions</span></span></div>
           <!--<input type="submit" value="SUBMIT" class="sub">--> 
        <button class="sub" type="submit">SUBMIT</button>
</form>

<footer>
        <div class="foot">
            <img src="images/logo.png">
            <a href=""><span class="span1">ABOUT US</span></a>
            <a href=""><span class="span2">HELP</span></a>
            <a href=""><span class="span3">CONTACT US</span></a>
            <hr>
            <div>
                <i class="fa fa-github" style="font-size:38px" ></i>
                <i class="fa fa-instagram" style="font-size:38px"></i>
                <i class="fa fa-google-plus-square" style="font-size:38px"></i>
                <i class="fa fa-linkedin-square" style="font-size:38px"></i>
                <i class="fa fa-whatsapp" style="font-size:38px"></i>
                <i class="fa fa-youtube-play" style="font-size:38px"></i>
                <i class="fa fa-twitter-square" style="font-size:38px"></i>
            </div>
            <div class="copy">
                copyright &copy; 2023.All Rights Reserved By <span>KV Blood Bank</span><br>
                Design & Develop By <span>Kingshly</span> 
            </div>
        </div>
        </footer>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.3/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>   
    <script>

    
        const form=document.getElementById("form");
        const uname=document.getElementById("name");
        const mail=document.getElementById("mail");
        const textarea=document.getElementById("feedback");
        const btn=document.getElementsByClassName("sub");
        
        String.prototype.isEmail = function() {
            return !!this.match(/^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/);
        }
        
        function checklength(input, min, max) {
            const data = input.value.trim().length;
            if(input.value === ""){
               error(input, `${getname(input)} is Required`);
            }
            else if(data < min){
                error(input, `${getname(input)} Must Greater Than ${min} Character`);
            }
            else if(data>max){
                error(input, `${getname(input)} Must Smaller Than ${max} Character`);
            }
            else {
                success(input);
               return true;
            }
           return false;
        }
        function checkmail(input) {
            if(input.value === "")
        {
            error(input, `${getname(input)} is Required`);
            return false;
            
        }
        else if (!input.value.trim().isEmail())
        {
            error(input, `Please Enter a valid email ID`);
            return false;
        }
        return true;
        }
        function getname(input){
            return input.getAttribute("data-name");
        }
        function error(input, message){ 
            const fmgroup = input.parentElement;
            fmgroup.className="fgroup error";
            const p = fmgroup.querySelector("p");
            p.innerHTML = message;
        } 
        function success(input){
            const fmgroup=input.parentElement;
            fmgroup.className="fgroup success";
            const p=fmgroup.querySelector("p");
            p.innerHTML = "";
        }
        
        function checkvalue(inputs){
  let valid=true;
    inputs.forEach((input) => {
        if(input.value.trim()==""){
            error(input,`${getname(input)} is required`);
            valid=false;
        }
        else{
            success(input);
            return true;
        }
    });
    return valid;
}
        
        form.addEventListener("submit", function (e) {
            e.preventDefault();
            const one = checkvalue([uname, mail,textarea]);
            const two = checklength(uname, 3, 20);
            const three = checklength(textarea, 10, 100);
            const four = checkmail(mail);
            console.log(one,two, three, four);
          
            if (two && three && four) {
              fetch('feed.php', {
                method: 'POST',
                headers: {
                  'Content-Type': 'application/x-www-form-urlencoded'
                },
                body: new URLSearchParams({
                  name: uname.value,
                  mail: mail.value,
                  feedback:feedback.value
                })
              })
              .then(response => {
                if (response.ok) {
                  // Redirect to another page
                  window.location.href = 'login.html';
                } else {
                  throw new Error('Something went wrong');
                }
              })
              .catch(error => console.error(error));
            }
          });
            </script>
    </body>
    </html> 